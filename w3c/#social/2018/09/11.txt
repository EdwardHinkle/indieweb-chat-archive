2018-09-11 05:31:27.285500 {"type":"message","timestamp":1536643887.2855,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"Looking in data that arrived on my system I saw that the signed data includes some \"digest\". Hos is this generated?","modes":[]}
2018-09-11 06:25:05.407700 {"type":"join","timestamp":1536647105.4077,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"xmpp-social","nickname":"xmpp-social","username":"~xmpp-social","name":"xmpp-social","photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 06:41:48.014900 {"type":"join","timestamp":1536648108.0149,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"rialtate[m]","nickname":"rialtate[m]","username":"~rialtatema","name":null,"photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 07:41:42.409900 {"type":"join","timestamp":1536651702.4099,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"cwebber2","nickname":"cwebber2","username":"~cwebber2","name":"Christopher Lemmer Webber","photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 08:12:32.073000 {"type":"join","timestamp":1536653552.073,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"vt","nickname":"vt","username":"~vt","name":null,"photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 10:18:40.167000 {"type":"join","timestamp":1536661120.167,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"edsu_","nickname":"edsu_","username":"~edsu","name":null,"photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 10:22:31.646700 {"type":"message","timestamp":1536661351.6467,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"puckipedia","nickname":"puckipedia","username":"~puck","name":":P","photo":null,"url":null,"tz":null},"content":"heluecht[m]: the digest in the signature is the Digest header, which just contains a hash over the body of the request","modes":[]}
2018-09-11 10:40:30.812500 {"type":"message","timestamp":1536662430.8125,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"Is there some more documentation\/sample code how to generate the digest? Of course I can reengineer it - but having some more documentation could be helpful. Is the digest some standard stuff in HTTP? I haven't really noticed it until now.","modes":[]}
2018-09-11 10:48:55.344400 {"type":"message","timestamp":1536662935.3444,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"puckipedia","nickname":"puckipedia","username":"~puck","name":":P","photo":null,"url":null,"tz":null},"content":"the digest is just ths SHA-256 over the raw body of the request\/response","modes":[]}
2018-09-11 10:50:13.752000 {"type":"message","timestamp":1536663013.752,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"puckipedia","nickname":"puckipedia","username":"~puck","name":":P","photo":null,"url":null,"tz":null},"content":"e.g. if you have a \"POST \/inbox HTTP\/1.1\\r\\nContent-Length: 2\\r\\n\\r\\n{}\" the digest header looks like \"Digest: SHA-256=RBNvo1WzZ4oRRq0W9+hknpT7T8If536DEMBg9hyq\/4o\" iirc","modes":[]}
2018-09-11 10:50:21.230000 {"type":"message","timestamp":1536663021.23,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"puckipedia","nickname":"puckipedia","username":"~puck","name":":P","photo":null,"url":null,"tz":null},"content":"(which is the SHA256 of '{}')","modes":[]}
2018-09-11 11:06:14.534800 {"type":"join","timestamp":1536663974.5348,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"edsu","nickname":"edsu","username":"~edsu","name":"Ed Summers <http:\/\/twitter.com\/edsu>","photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 11:12:23.358900 {"type":"join","timestamp":1536664343.3589,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"cwebber2","nickname":"cwebber2","username":"~cwebber2","name":"Christopher Lemmer Webber","photo":null,"url":null,"tz":null},"content":null,"modes":[]}
2018-09-11 11:17:23.057700 {"type":"message","timestamp":1536664643.0577,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"Do I have to validate the digest manually or is it done in the protocol?","modes":[]}
2018-09-11 11:27:20.070700 {"type":"message","timestamp":1536665240.0707,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"JasonRobinson[m]","nickname":"JasonRobinson[m]","username":"~jaywinkfen","name":"@jaywink:feneas.org","photo":null,"url":null,"tz":null},"content":"none of this stuff is in AP directly","modes":[]}
2018-09-11 11:58:50.586300 {"type":"message","timestamp":1536667130.5863,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"puckipedia","nickname":"puckipedia","username":"~puck","name":":P","photo":null,"url":null,"tz":null},"content":"heluecht[m]: my suggestion, primarily, is to just validate the digest any time you receive it, even if it's not specifically signed","modes":[]}
2018-09-11 12:36:41.861100 {"type":"message","timestamp":1536669401.8611,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"heluecht: digest is an actual HTTP header, yes.","modes":[]}
2018-09-11 13:38:56.900600 {"type":"message","timestamp":1536673136.9006,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"The question is if the digest is checked by some internal routine - and what would happen when it was wrong. So possibly it is the best to do like puckipedia said: Just validating it on the receiving side as well, just to be sure.","modes":[]}
2018-09-11 13:47:27.051600 {"type":"message","timestamp":1536673647.0516,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"the digest is computed when checking the HTTP signature, if the application supports it","modes":[]}
2018-09-11 13:49:28.292400 {"type":"message","timestamp":1536673768.2924,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"I don't see a point to validating the digest separately from the signature. I'm not sure what puckipedia's point is. it's possible your http signature library doesn't support validating it though.","modes":[]}
2018-09-11 13:51:23.919700 {"type":"message","timestamp":1536673883.9197,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"I want to guarantee that a signature can't be reused. So I have to use values for the signatur that changes per each single activity. But when the digest wouldn't be checked at the receiver, then an attacker could simply replicate the same digest over and over again.","modes":[]}
2018-09-11 13:51:42.130200 {"type":"message","timestamp":1536673902.1302,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"that's a different concern","modes":[]}
2018-09-11 13:52:15.774600 {"type":"message","timestamp":1536673935.7746,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"just make sure you're signing the Date header and the Host header, and it will be impossible to re-use a signature","modes":[]}
2018-09-11 13:52:29.786800 {"type":"message","timestamp":1536673949.7868,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"because you're assumed to be transporting these over HTTPS","modes":[]}
2018-09-11 13:52:39.600800 {"type":"message","timestamp":1536673959.6008,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"You could always send the same date over and over again.","modes":[]}
2018-09-11 13:52:59.220900 {"type":"message","timestamp":1536673979.2209,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"Or who is checking these value at the receiving side.","modes":[]}
2018-09-11 13:53:40.568500 {"type":"message","timestamp":1536674020.5685,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null},"content":"I don't want to rely only upon HTTPS. Neither DFRN (Friendica) nor Diaspora are doing so. They both use signatures based upon the content.","modes":[]}
2018-09-11 13:54:34.510800 {"type":"message","timestamp":1536674074.5108,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"hmm","modes":[]}
2018-09-11 13:54:45.022000 {"type":"message","timestamp":1536674085.022,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"I'm not sure what you mean","modes":[]}
2018-09-11 13:55:09.548600 {"type":"message","timestamp":1536674109.5486,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"Signatures are for client -> server authentication","modes":[]}
2018-09-11 13:55:33.377700 {"type":"message","timestamp":1536674133.3777,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"HTTPS is for transport confidentiality and server <- client authentication","modes":[]}
2018-09-11 13:56:03.517000 {"type":"message","timestamp":1536674163.517,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"sorry server -> client","modes":[]}
2018-09-11 13:56:33.640800 {"type":"message","timestamp":1536674193.6408,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"they serve different purposes","modes":[]}
2018-09-11 13:59:23.929200 {"type":"message","timestamp":1536674363.9292,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"anyway, to your point about \"who is validating these things\"\u2014im not seeing anything in HTTP Signatures about recommended validation. that's probably bad","modes":[]}
2018-09-11 13:59:42.146200 {"type":"message","timestamp":1536674382.1462,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null},"content":"mastodon validates that the Date header is within 5 minutes and that the request target matches the actual request","modes":[]}
2018-09-11 13:59:43.799500 {"type":"join","timestamp":1536674383.7995,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"vasilakisfil","nickname":"vasilakisfil","username":"~vasilakisfil","name":"vasilakisfil","photo":null,"url":null,"tz":null},"content":null,"modes":[]}
